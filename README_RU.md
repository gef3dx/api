# Backend-проект на FastAPI

Это бэкенд-сервис на FastAPI, реализованный по шаблону архитектуры «репозиторий/сервис». Система реализует аутентификацию пользователей, управление профилями, систему уведомлений и управление доступом на основе ролей (RBAC) с использованием современных инструментов Python и лучших практик.

## Функциональность

*   **Аутентификация пользователей** с помощью JWT-токенов
*   **Система управления профилями**
*   **Система уведомлений** с возможностью работы в реальном времени
*   **Система приватных сообщений** между пользователями
*   **Управление доступом на основе ролей (RBAC)** (клиент, исполнитель, администратор)
*   **Сброс пароля** с подтверждением по email
*   **Миграции базы данных** с помощью Alembic
*   **Внедрение зависимостей** с помощью Dishka

## Технологический стек

*   **Фреймворк:** FastAPI (Python 3.11+)
*   **ASGI-сервер:** Uvicorn
*   **База данных:** SQLite с SQLAlchemy 2.0 (AsyncSession)
*   **Миграции:** Alembic
*   **Внедрение зависимостей:** Dishka
*   **Валидация данных:** Pydantic v2
*   **Безопасность:** Passlib (bcrypt/argon2), PyJWT
*   **Email:** aiosmtplib
*   **Конфигурация:** python-dotenv
*   **Тестирование:** pytest, httpx, pytest-asyncio
*   **Качество кода:** ruff, black, mypy

## Структура проекта

app/
core/
config.py # Конфигурация приложения
security.py # Хеширование и проверка паролей
jwt.py # Создание и валидация JWT-токенов
email.py # Функциональность отправки email
db/
base.py # Базовые модели базы данных
session.py # Управление сессиями базы данных
domain/
users/ # Доменный слой: Пользователи
models.py # Модель пользователя в БД
schemas.py # Pydantic-схемы для пользователя
repository.py # Слой доступа к данным пользователя (репозиторий)
service.py # Бизнес-логика пользователя (сервис)
router.py # API-эндпоинты пользователя
enums.py # Перечисления, связанные с пользователем
policies.py # Политики доступа для пользователя
profiles/ # Доменный слой: Профили
... # (аналогичная структура)
auth/ # Доменный слой: Аутентификация
... # (аналогичная структура)
notifications/ # Доменный слой: Уведомления
... # (аналогичная структура)
messages/ # Доменный слой: Сообщения
... # (аналогичная структура)
di/
container.py # Контейнер для внедрения зависимостей
api/
deps.py # Зависимости API
router.py # Главный роутер API
utils/
crypto.py # Криптографические утилиты
exceptions.py # Пользовательские исключения
main.py # Точка входа в приложение
alembic/ # Миграции базы данных
env.py
versions/
docs/ # Документация
scripts/ # Скрипты для разработки
tests/ # Тесты
test_auth.py
test_users.py
test_profiles.py
test_notifications.py
.env.example # Пример файла переменных окружения
